//frontend/src/app/page.jsx

import { redirect } from 'next/navigation'
import { headers } from 'next/headers'

const supportedLangs = ['pt-br', 'en', 'es', 'zh']

// üîç Detecta o idioma preferido do usu√°rio com base no header
export default async function Page() {
  const acceptLang = (await headers()).get('accept-language') || ''
  const preferred = acceptLang
    .split(',')
    .map(lang => lang.split(';')[0].toLowerCase())

  // ‚úÖ Verifica se algum dos idiomas preferidos √© suportado
  const matched = preferred.find(lang =>
    supportedLangs.includes(lang)
  )

  const lang = matched || 'en' // üåê Fallback para ingl√™s se n√£o encontrar

  // üîÅ Redireciona para a vers√£o localizada da p√°gina
  redirect(`/${lang}/`)
}

// src/app/page.jsx
//import { cookies, headers } from 'next/headers';
//import { redirect } from 'next/navigation';
//
//const supportedLangs = ['pt-br', 'en', 'es', 'zh'];
//
//export default function Page() {
//  // üç™ Verifica se o usu√°rio j√° escolheu um idioma
//  const cookieStore = cookies();
//  const cookieLang = cookieStore.get('preferredLang')?.value;
//
//  // üåê Detecta idioma preferido do navegador
//  const headerList = headers();
//  const acceptLang = headerList.get('accept-language') || '';
//  const preferred = acceptLang
//    .split(',')
//    .map(lang => lang.split(';')[0].toLowerCase());
//
//  const matched = preferred.find(lang => supportedLangs.includes(lang));
//
//  // üß† Decide o idioma final: cookie > navegador > fallback
//  const lang = supportedLangs.includes(cookieLang) ? cookieLang : matched || 'en';
//
//  // üîÅ Redireciona para a rota localizada
//  redirect(`/${lang}/`);
//}

//import { redirect } from 'next/navigation';
//import { headers } from 'next/headers';
//
//const supportedLangs = ['pt-br', 'en', 'es', 'zh'];
//
//// üîç Detecta o idioma preferido do usu√°rio com base no header
//async function detectLang() {
//  const headerList = await headers();
//  const acceptLang = headerList.get('accept-language') || '';
//
//  const preferred = acceptLang
//    .split(',')
//    .map(lang => lang.split(';')[0].toLowerCase());
//
//  const matched = preferred.find(lang =>
//    supportedLangs.includes(lang)
//  );
//
//  return matched || 'en'; // üåê Fallback para ingl√™s se n√£o encontrar
//}
//
//// üîÅ Redireciona para a vers√£o localizada da p√°gina
//export default async function Page() {
//  const lang = await detectLang();
//  redirect(`/${lang}/`); // ou /${lang}/
//}

//import { redirect } from 'next/navigation'
//import { headers } from 'next/headers'
//
//const supportedLangs = ['pt-br', 'en', 'es', 'zh']
//
//// üîç Detecta o idioma preferido do usu√°rio com base no header
//export default async function Page() {
//  const acceptLang = (await headers()).get('accept-language') || ''
//  const preferred = acceptLang
//    .split(',')
//    .map(lang => lang.split(';')[0].toLowerCase())
//
//  // ‚úÖ Verifica se algum dos idiomas preferidos √© suportado
//  const matched = preferred.find(lang =>
//    supportedLangs.includes(lang)
//  )
//
//  const lang = matched || 'en' // üåê Fallback para ingl√™s se n√£o encontrar
//
//  // üîÅ Redireciona para a vers√£o localizada da p√°gina
//  redirect(`/${lang}/`)
//}

//import { redirect } from 'next/navigation'
//import { headers } from 'next/headers'
//
//const supportedLangs = ['pt-br', 'en', 'es', 'zh']
//
//function detectLang() {
//  const acceptLang = headers().get('accept-language') || ''
//  const preferred = acceptLang
//    .split(',')
//    .map(lang => lang.split(';')[0].toLowerCase())
//
//  const matched = preferred.find(lang =>
//    supportedLangs.includes(lang)
//  )
//
//  return matched || 'en' // fallback se n√£o encontrar
//}
//
//export default function Page() {
//  const lang = detectLang()
//  redirect(`/${lang}/`) // ou /${lang}/
//}